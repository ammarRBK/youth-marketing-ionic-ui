{"ast":null,"code":"var _class;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./edit-profile.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./edit-profile.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { AuthService } from '../../../services/auth.service';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { MustMatch } from '../../../users/_helper';\nimport { Router } from '@angular/router';\nimport { ProductsService } from 'src/app/services/products.service';\nlet EditProfilePage = (_class = class EditProfilePage {\n  constructor(authServ, prodsSer, router, formBuilder) {\n    this.authServ = authServ;\n    this.prodsSer = prodsSer;\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.errorMessage = '';\n    this.successMessage = '';\n  }\n  ngOnInit() {\n    this.editProfileForm = this.formBuilder.group({\n      userName: ['', [Validators.minLength(3)]],\n      password: ['', [Validators.minLength(8), Validators.pattern(/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/)]],\n      confirmPassword: ['', [Validators.minLength(8)]],\n      phoneNumber: ['', [Validators.minLength(9), Validators.maxLength(14)]],\n      email: ['', [Validators.email]],\n      oldPassword: ['', [Validators.required, Validators.minLength(8)]]\n    }, {\n      validator: MustMatch('password', 'confirmPassword')\n    });\n    this.formValuesAsString();\n  }\n  submitEditForm() {\n    if (this.oldPasswordCorrect) {\n      let newData = {\n        newUserName: this.editProfileForm.value.userName.length > 0 ? this.editProfileForm.value.userName : \"\",\n        newPhoneNumber: this.editProfileForm.value.phoneNumber ? this.editProfileForm.value.phoneNumber : \"\",\n        newPassword: this.editProfileForm.value.password.length > 0 ? this.editProfileForm.value.password : \"\",\n        newEmail: this.editProfileForm.value.email.length > 0 ? this.editProfileForm.value.email : null,\n        oldPassword: this.editProfileForm.value.oldPassword\n      };\n      this.authServ.editProfile(newData).subscribe(resault => {\n        if (resault['message'] === 'updated user info') {\n          this.successMessage = \"تم تعديل المعلومات الشخصية\";\n          setTimeout(() => {\n            this.editProfileForm.setValue({\n              userName: null,\n              password: null,\n              confirmPassword: null,\n              phoneNumber: null,\n              email: null,\n              oldPassword: null\n            });\n            document.getElementById(\"checkButton\").style.color = \"secondary\";\n            this.successMessage = \"\";\n          }, 3000);\n        } else {\n          this.errorMessage = \"حصل خطأ أثناء تعديل المعلومات تأكد من كتابتها بالصيغة الصحيحة\";\n          setTimeout(() => {\n            this.errorMessage = \"\";\n          }, 2500);\n        }\n      });\n    }\n  }\n  checkOldPassword(oldPassword) {\n    this.authServ.checkOldPassword(oldPassword).subscribe(resault => {\n      if (resault['message'] === \"authintecated\") {\n        this.oldPasswordCorrect = true;\n        this.successMessage = \"تم التأكد من كلمة السر\";\n        document.getElementById(\"checkButton\").style.color = \"success\";\n        setTimeout(() => {\n          this.successMessage = \"\";\n        }, 1500);\n      } else {\n        this.oldPasswordCorrect = false;\n        this.errorMessage = \"الرجاء التأكد من كلمة السر*\";\n        setTimeout(() => {\n          this.errorMessage = \"\";\n        }, 2000);\n      }\n    });\n  }\n  formValuesAsString() {\n    this.editProfileForm.valueChanges.subscribe(values => {\n      let formString = '' + values.userName + values.password + values.confirmPassword + values.phoneNumber + values.email;\n      formString.length > 0 && values.oldPassword ? this.filled = true : this.filled = false;\n    });\n  }\n  backToProfile() {\n    this.router.navigateByUrl('home/login/profile');\n  }\n}, _class.ctorParameters = () => [{\n  type: AuthService\n}, {\n  type: ProductsService\n}, {\n  type: Router\n}, {\n  type: FormBuilder\n}], _class);\nEditProfilePage = __decorate([Component({\n  selector: 'app-edit-profile',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], EditProfilePage);\nexport { EditProfilePage };","map":{"version":3,"names":["Component","AuthService","FormBuilder","Validators","MustMatch","Router","ProductsService","EditProfilePage","_class","constructor","authServ","prodsSer","router","formBuilder","errorMessage","successMessage","ngOnInit","editProfileForm","group","userName","minLength","password","pattern","confirmPassword","phoneNumber","maxLength","email","oldPassword","required","validator","formValuesAsString","submitEditForm","oldPasswordCorrect","newData","newUserName","value","length","newPhoneNumber","newPassword","newEmail","editProfile","subscribe","resault","setTimeout","setValue","document","getElementById","style","color","checkOldPassword","valueChanges","values","formString","filled","backToProfile","navigateByUrl","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\UNICEF\\Desktop\\youth-marketing-projrct\\youth-marketing-ionic-ui\\src\\app\\login\\profile\\edit-profile\\edit-profile.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MustMatch } from '../../../users/_helper';\r\nimport { Router } from '@angular/router';\r\nimport { ProductsService } from 'src/app/services/products.service';\r\n\r\n@Component({\r\n  selector: 'app-edit-profile',\r\n  templateUrl: './edit-profile.page.html',\r\n  styleUrls: ['./edit-profile.page.scss'],\r\n})\r\nexport class EditProfilePage implements OnInit {\r\n\r\n  editProfileForm: FormGroup;\r\n  errorMessage='';\r\n  successMessage='';\r\n  filled: boolean;\r\n  oldPasswordCorrect: boolean;\r\n\r\n  constructor(private authServ: AuthService,private prodsSer: ProductsService, private router: Router, private formBuilder: FormBuilder) { }\r\n\r\n  ngOnInit() {\r\n    this.editProfileForm= this.formBuilder.group({\r\n      userName: ['',[Validators.minLength(3)]],\r\n      password: ['',[Validators.minLength(8), Validators.pattern(/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/)]],\r\n      confirmPassword: ['',[Validators.minLength(8)]],\r\n      phoneNumber: ['',[Validators.minLength(9),Validators.maxLength(14)]],\r\n      email: ['',[Validators.email]],\r\n      oldPassword: ['',[Validators.required, Validators.minLength(8)]]\r\n    },\r\n    {validator: MustMatch('password', 'confirmPassword')})\r\n\r\n    this.formValuesAsString();\r\n  }\r\n\r\n  submitEditForm(){\r\n    if(this.oldPasswordCorrect){\r\n      let newData={\r\n        newUserName: this.editProfileForm.value.userName.length > 0 ? this.editProfileForm.value.userName : \"\",\r\n        newPhoneNumber: this.editProfileForm.value.phoneNumber ? this.editProfileForm.value.phoneNumber : \"\",\r\n        newPassword: this.editProfileForm.value.password.length > 0 ? this.editProfileForm.value.password : \"\",\r\n        newEmail: this.editProfileForm.value.email.length > 0 ? this.editProfileForm.value.email : null,\r\n        oldPassword: this.editProfileForm.value.oldPassword\r\n      }\r\n\r\n      this.authServ.editProfile(newData).subscribe(resault=>{\r\n        if(resault['message'] === 'updated user info'){\r\n          this.successMessage= \"تم تعديل المعلومات الشخصية\"\r\n\r\n          setTimeout(() => {\r\n            this.editProfileForm.setValue({\r\n              userName: null,\r\n              password: null,\r\n              confirmPassword: null,\r\n              phoneNumber: null,\r\n              email: null,\r\n              oldPassword: null\r\n            })\r\n            document.getElementById(\"checkButton\").style.color= \"secondary\";\r\n            this.successMessage= \"\";\r\n          }, 3000);\r\n        }else{\r\n          this.errorMessage= \"حصل خطأ أثناء تعديل المعلومات تأكد من كتابتها بالصيغة الصحيحة\";\r\n\r\n          setTimeout(() => {\r\n            this.errorMessage= \"\";\r\n          }, 2500);\r\n        }\r\n      })\r\n    }\r\n  }\r\n  \r\n  checkOldPassword(oldPassword){\r\n    this.authServ.checkOldPassword(oldPassword).subscribe(resault=>{\r\n      if(resault['message'] === \"authintecated\"){ \r\n        this.oldPasswordCorrect= true;\r\n        this.successMessage= \"تم التأكد من كلمة السر\"\r\n        document.getElementById(\"checkButton\").style.color= \"success\";\r\n        setTimeout(() => {\r\n          this.successMessage=\"\";\r\n        }, 1500);\r\n      }else{\r\n        this.oldPasswordCorrect= false;\r\n        this.errorMessage= \"الرجاء التأكد من كلمة السر*\";\r\n\r\n        setTimeout(()=>{\r\n          this.errorMessage= \"\"\r\n        },2000)\r\n      }\r\n    })\r\n  }\r\n\r\n  formValuesAsString(){\r\n    this.editProfileForm.valueChanges.subscribe(values=>{\r\n      let formString= ''+ values.userName+ values.password+ values.confirmPassword+ values.phoneNumber+ values.email;\r\n      formString.length > 0 && values.oldPassword ? this.filled= true : this.filled= false;\r\n    })\r\n    \r\n  }\r\n\r\n  backToProfile(){\r\n    this.router.navigateByUrl('home/login/profile');\r\n  }\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}