{"ast":null,"code":"var _class;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.page.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LoadingController, NavController } from '@ionic/angular';\nimport { AuthService } from '../services/auth.service';\nimport { ProductsService } from '../services/products.service';\nlet LoginPage = (_class = class LoginPage {\n  constructor(loginForm, loginServe, navCtrl, router, productsSer, loadingController) {\n    this.loginForm = loginForm;\n    this.loginServe = loginServe;\n    this.navCtrl = navCtrl;\n    this.router = router;\n    this.productsSer = productsSer;\n    this.loadingController = loadingController;\n  }\n  ngOnInit() {\n    this.loginInterfaceForm = this.loginForm.group({\n      phoneNumber: ['', [Validators.required, Validators.minLength(9), Validators.maxLength(14)]],\n      password: ['', [Validators.required, Validators.minLength(8), Validators.pattern(/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/)]]\n    });\n    this.loginServe.checkLoggedIn().subscribe(res => {\n      if (res['message'] === \"loggedin\") {\n        this.router.navigateByUrl('home/login/profile');\n      }\n      console.log(\"not loggedin\");\n    });\n  }\n  submitLogin() {\n    this.productsSer.loadingProcess('!!...يتم الآن تسجيل الدخول الرجاء الانتظار');\n    let user = this.loginInterfaceForm.value;\n    this.loginServe.login(user).subscribe(res => {\n      if (!res) {\n        this.loadingController.dismiss();\n        console.log(\"problem in LOGIN\");\n      } else {\n        if (res['message'] === \"user Authintecated\") {\n          console.log(res['user']);\n          this.userProfileData = res['user'];\n          this.errorMessage = '';\n          this.loadingController.dismiss();\n          this.router.navigateByUrl('home/login/profile');\n        }\n        if (res['message'] === \"wrong password\") {\n          this.loadingController.dismiss();\n          this.errorMessage = 'كلمة السر خاطئة الرجاء التأكد من كلمة السر*';\n          setTimeout(() => {\n            this.errorMessage = \"\";\n          }, 3000);\n        } else {\n          if (res['message'] === \"user is not in database\") {\n            this.loadingController.dismiss();\n            this.errorMessage = 'رقم الهاتف خاطئ أو المستخدم غير مسجل لدينا الرجاء التأكد من رقم الهاتف* ';\n            setTimeout(() => {\n              this.errorMessage = \"\";\n            }, 3000);\n          } else {\n            this.loadingController.dismiss();\n            this.errorMessage = res['message'] + '\\n' + \"Error: \" + res['error'];\n            setTimeout(() => {\n              this.errorMessage = \"\";\n            }, 3000);\n          }\n        }\n      }\n    });\n  }\n  backToSignup() {\n    this.router.navigateByUrl('home/users');\n  }\n}, _class.ctorParameters = () => [{\n  type: FormBuilder\n}, {\n  type: AuthService\n}, {\n  type: NavController\n}, {\n  type: Router\n}, {\n  type: ProductsService\n}, {\n  type: LoadingController\n}], _class);\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginPage);\nexport { LoginPage };","map":{"version":3,"names":["Component","FormBuilder","Validators","Router","LoadingController","NavController","AuthService","ProductsService","LoginPage","_class","constructor","loginForm","loginServe","navCtrl","router","productsSer","loadingController","ngOnInit","loginInterfaceForm","group","phoneNumber","required","minLength","maxLength","password","pattern","checkLoggedIn","subscribe","res","navigateByUrl","console","log","submitLogin","loadingProcess","user","value","login","dismiss","userProfileData","errorMessage","setTimeout","backToSignup","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\UNICEF\\Desktop\\youth-marketing-projrct\\youth-marketing-ionic-ui\\src\\app\\login\\login.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, NavController } from '@ionic/angular';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { ProductsService } from '../services/products.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  loginInterfaceForm: FormGroup;\r\n  errorMessage: string;\r\n  userProfileData: object;\r\n\r\n  constructor(private loginForm:FormBuilder, public loginServe: AuthService, private navCtrl: NavController, private router: Router, private productsSer: ProductsService, public loadingController: LoadingController) { }\r\n  \r\n  ngOnInit(){\r\n    this.loginInterfaceForm= this.loginForm.group({\r\n      phoneNumber: ['',[Validators.required, Validators.minLength(9), Validators.maxLength(14)]],\r\n      password: ['', [Validators.required, Validators.minLength(8), Validators.pattern(/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/)]]\r\n    });\r\n    \r\n    this.loginServe.checkLoggedIn().subscribe(res=>{\r\n      if(res['message']=== \"loggedin\"){\r\n      this.router.navigateByUrl('home/login/profile')\r\n      }\r\n      console.log(\"not loggedin\")\r\n    })\r\n    \r\n  }\r\n\r\n  submitLogin(){\r\n    this.productsSer.loadingProcess('!!...يتم الآن تسجيل الدخول الرجاء الانتظار')\r\n    let user= this.loginInterfaceForm.value;\r\n    this.loginServe.login(user).subscribe(res=>{\r\n      if (!res) {\r\n        this.loadingController.dismiss()\r\n        console.log(\"problem in LOGIN\")\r\n      }else{\r\n        if(res['message']=== \"user Authintecated\"){\r\n          console.log(res['user'])\r\n          this.userProfileData= res['user'];\r\n          this.errorMessage='';\r\n          this.loadingController.dismiss()\r\n          this.router.navigateByUrl('home/login/profile');\r\n\r\n        }if(res['message']=== \"wrong password\"){\r\n          this.loadingController.dismiss()\r\n          this.errorMessage= 'كلمة السر خاطئة الرجاء التأكد من كلمة السر*';\r\n          setTimeout(() => {\r\n            this.errorMessage= \"\"\r\n          }, 3000);\r\n          }else{\r\n            if (res['message'] === \"user is not in database\") {\r\n              this.loadingController.dismiss()\r\n              this.errorMessage= 'رقم الهاتف خاطئ أو المستخدم غير مسجل لدينا الرجاء التأكد من رقم الهاتف* ';\r\n              setTimeout(() => {\r\n                this.errorMessage= \"\"\r\n              }, 3000);\r\n            } else {\r\n              this.loadingController.dismiss()\r\n              this.errorMessage= res['message'] + '\\n' + \"Error: \" + res['error'];\r\n              setTimeout(() => {\r\n                this.errorMessage= \"\"\r\n              }, 3000);\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  backToSignup(){\r\n    this.router.navigateByUrl('home/users')\r\n  }\r\n\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}