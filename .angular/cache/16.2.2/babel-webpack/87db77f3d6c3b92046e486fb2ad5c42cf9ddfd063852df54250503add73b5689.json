{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/UNICEF/Desktop/youth-marketing-projrct/youth-marketing-ionic-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./phoneconfirm.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./phoneconfirm.page.scss?ngResource\";\nimport { Component, Input } from '@angular/core';\nimport { LoadingController, ModalController, ToastController } from '@ionic/angular';\nimport { ProductsService } from '../../services/products.service';\nimport { UsersPage } from '../users.page';\nimport { getAuth, signInWithPhoneNumber } from 'firebase/auth';\nlet PhoneconfirmPage = (_class = class PhoneconfirmPage {\n  constructor(modalCtrl, loadingController, productSer, toastCtrl) {\n    this.modalCtrl = modalCtrl;\n    this.loadingController = loadingController;\n    this.productSer = productSer;\n    this.toastCtrl = toastCtrl;\n    this.timer = 59;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    setInterval(() => {\n      this.settimer();\n    }, 1000);\n  }\n  moveToNext(ev, num) {\n    if (num !== 'done') {\n      ev.target.value ? num.setFocus() : console.log('field');\n    }\n  }\n  settimer() {\n    this.timer > 0 ? this.timer = this.timer - 1 : this.timer = '';\n  }\n  sendCode() {\n    var code = Number('' + this.first + this.second + this.third + this.fourth + this.fifth + this.sixth);\n    window.confirmationResult.confirm(code).then(result => {\n      if (result) {\n        this.modalCtrl.dismiss();\n        UsersPage.returned.next(false);\n      }\n    }).catch(error => {\n      this.errorMessage = \"تم إدخال رمز خاطئ  الرجاء التأكد\";\n      setTimeout(() => {\n        this.errorMessage = \"\";\n      }, 3000);\n    });\n  }\n  resendVerificationCode() {\n    var _this = this;\n    this.productSer.loadingProcess('....جارٍ إعادة ارسال الرمز');\n    const auth = getAuth();\n    signInWithPhoneNumber(auth, this.phoneNumber, window.recaptchaVerifier).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (confirmationResult) {\n        window.confirmationResult = confirmationResult;\n        const toast = yield _this.toastCtrl.create({\n          message: '                        تم إعادة ارسال الرمز الرجاء إدخاله',\n          duration: 3000\n        });\n        _this.loadingController.dismiss();\n        toast.present();\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n  closeModal() {\n    this.modalCtrl.dismiss();\n  }\n}, _class.ctorParameters = () => [{\n  type: ModalController\n}, {\n  type: LoadingController\n}, {\n  type: ProductsService\n}, {\n  type: ToastController\n}], _class.propDecorators = {\n  phoneNumber: [{\n    type: Input\n  }]\n}, _class);\nPhoneconfirmPage = __decorate([Component({\n  selector: 'app-phoneconfirm',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], PhoneconfirmPage);\nexport { PhoneconfirmPage };","map":{"version":3,"names":["Component","Input","LoadingController","ModalController","ToastController","ProductsService","UsersPage","getAuth","signInWithPhoneNumber","PhoneconfirmPage","_class","constructor","modalCtrl","loadingController","productSer","toastCtrl","timer","errorMessage","ngOnInit","setInterval","settimer","moveToNext","ev","num","target","value","setFocus","console","log","sendCode","code","Number","first","second","third","fourth","fifth","sixth","window","confirmationResult","confirm","then","result","dismiss","returned","next","catch","error","setTimeout","resendVerificationCode","_this","loadingProcess","auth","phoneNumber","recaptchaVerifier","_ref","_asyncToGenerator","toast","create","message","duration","present","_x","apply","arguments","closeModal","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\UNICEF\\Desktop\\youth-marketing-projrct\\youth-marketing-ionic-ui\\src\\app\\users\\phoneconfirm\\phoneconfirm.page.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { LoadingController, ModalController, ToastController } from '@ionic/angular';\r\nimport { ProductsService } from '../../services/products.service';\r\nimport { UsersPage } from '../users.page';\r\nimport { getAuth, signInWithPhoneNumber } from 'firebase/auth';\r\n\r\n@Component({\r\n  selector: 'app-phoneconfirm',\r\n  templateUrl: './phoneconfirm.page.html',\r\n  styleUrls: ['./phoneconfirm.page.scss'],\r\n})\r\nexport class PhoneconfirmPage implements OnInit {\r\n  @Input() phoneNumber:any;\r\n  first:any;\r\n  second:any;\r\n  third:any;\r\n  fourth:any;\r\n  fifth:any;\r\n  sixth:any;\r\n  timer:any= 59;\r\n  errorMessage= '';\r\n\r\n  constructor(public modalCtrl: ModalController, private loadingController: LoadingController, private productSer: ProductsService, private toastCtrl: ToastController) { }\r\n\r\n  ngOnInit() {\r\n    setInterval(()=>{this.settimer()},1000)\r\n  }\r\n\r\n  moveToNext(ev,num){\r\n    if(num !== 'done'){\r\n      ev.target.value ? num.setFocus() : console.log('field');\r\n    }\r\n  }\r\n\r\n  settimer(){\r\n    this.timer > 0 ?  this.timer = this.timer-1 : this.timer= '';\r\n  }\r\n\r\n  sendCode(){\r\n    var code= Number(''+this.first+this.second+this.third+this.fourth+this.fifth+this.sixth);\r\n    \r\n    window.confirmationResult.confirm(code).then((result)=>{\r\n      if(result){\r\n        this.modalCtrl.dismiss();\r\n        UsersPage.returned.next(false);\r\n      }\r\n    }).catch((error)=>{\r\n      this.errorMessage= \"تم إدخال رمز خاطئ  الرجاء التأكد\";\r\n      setTimeout(() => {\r\n        this.errorMessage= \"\"\r\n      }, 3000);\r\n    })\r\n  }\r\n\r\n  resendVerificationCode(){\r\n    this.productSer.loadingProcess('....جارٍ إعادة ارسال الرمز')\r\n    const auth= getAuth();\r\n    \r\n    signInWithPhoneNumber(auth, this.phoneNumber ,window.recaptchaVerifier).then(async (confirmationResult)=>{\r\n      window.confirmationResult= confirmationResult;\r\n      const toast=await this.toastCtrl.create({\r\n        message: '                        تم إعادة ارسال الرمز الرجاء إدخاله',\r\n        duration: 3000\r\n      })\r\n      this.loadingController.dismiss()\r\n      toast.present();\r\n    })\r\n  }\r\n\r\n  closeModal(){\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}